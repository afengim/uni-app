(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2477dc9e"],{"0f9f":function(t,e,a){"use strict";a.d(e,"b",function(){return i}),a.d(e,"c",function(){return s}),a.d(e,"a",function(){return r});var n=a("ed08"),i={disabledDate:function(t){return Object(n["a"])(Object(n["d"])(new Date,1),Object(n["d"])(t))},shortcuts:[{text:"本周",onClick:function(t){var e=new Date,a=new Date,n=e.getDay()-1;a.setTime(a.getTime()-864e5*n),t.$emit("pick",[a,e])}},{text:"本月",onClick:function(t){var e=new Date,a=new Date,n=e.getDate();a.setTime(a.getTime()-864e5*(n-1)),t.$emit("pick",[a,e])}},{text:"上个月",onClick:function(t){var e=new Date,a=new Date,n=new Date;a.setMonth(a.getMonth()-1),a.setDate(1),e.setMonth(e.getMonth()-1),e.setDate(new Date(n.getFullYear(),n.getMonth(),0).getDate()),t.$emit("pick",[a,e])}},{text:"本季度",onClick:function(t){var e=new Date,a=new Date,n=a.getMonth(),i=0;n<3?i=n:n<6?i=n-3:n<9?i=n-6:n<12&&(i=n-9),a.setMonth(a.getMonth()-i),a.setDate(1),t.$emit("pick",[a,e])}},{text:"本年",onClick:function(t){var e=new Date,a=new Date(e.getFullYear(),0,1);t.$emit("pick",[a,e])}},{text:"去年",onClick:function(t){var e=new Date,a=new Date(e.getFullYear()-1,0,1);e.setFullYear(e.getFullYear()-1),e.setMonth(11),e.setDate(new Date(a.getFullYear()+1,1,0).getDate()),t.$emit("pick",[a,e])}}]},s={disabledDate:function(t){return Object(n["a"])(Object(n["d"])(new Date),Object(n["d"])(t))},shortcuts:[{text:"本周",onClick:function(t){var e=new Date,a=new Date,n=e.getDay()-1;a.setTime(a.getTime()-864e5*n),e.setDate(e.getDate()-1),a.getTime()>e.getTime()&&(a=e),t.$emit("pick",[a,e])}},{text:"本月",onClick:function(t){var e=new Date,a=new Date,n=e.getDate();a.setTime(a.getTime()-864e5*(n-1)),e.setDate(e.getDate()-1),a.getTime()>e.getTime()&&(a=e),t.$emit("pick",[a,e])}},{text:"上个月",onClick:function(t){var e=new Date,a=new Date,n=new Date;a.setMonth(a.getMonth()-1),a.setDate(1),e.setMonth(e.getMonth()-1),e.setDate(new Date(n.getFullYear(),n.getMonth(),0).getDate()),t.$emit("pick",[a,e])}},{text:"本季度",onClick:function(t){var e=new Date,a=new Date,n=a.getMonth(),i=0;n<3?i=n:n<6?i=n-3:n<9?i=n-6:n<12&&(i=n-9),a.setMonth(a.getMonth()-i),a.setDate(1),e.setDate(e.getDate()-1),t.$emit("pick",[a,e])}},{text:"本年",onClick:function(t){var e=new Date,a=new Date(e.getFullYear(),0,1);e.setDate(e.getDate()-1),t.$emit("pick",[a,e])}},{text:"去年",onClick:function(t){var e=new Date,a=new Date(e.getFullYear()-1,0,1);e.setFullYear(e.getFullYear()-1),e.setMonth(11),e.setDate(new Date(a.getFullYear()+1,1,0).getDate()),t.$emit("pick",[a,e])}}]},r={disabledDate:function(t){return Object(n["a"])(Object(n["d"])(new Date),Object(n["d"])(t))},shortcuts:[{text:"本周",onClick:function(t){var e=new Date,a=new Date,n=e.getDay()-1;a.setTime(a.getTime()-864e5*n),t.$emit("pick",[a,e])}},{text:"本月",onClick:function(t){var e=new Date,a=new Date,n=e.getDate();a.setTime(a.getTime()-864e5*(n-1)),t.$emit("pick",[a,e])}},{text:"上个月",onClick:function(t){var e=new Date,a=new Date,n=new Date;a.setMonth(a.getMonth()-1),a.setDate(1),e.setMonth(e.getMonth()-1),e.setDate(new Date(n.getFullYear(),n.getMonth(),0).getDate()),t.$emit("pick",[a,e])}},{text:"本季度",onClick:function(t){var e=new Date,a=new Date,n=a.getMonth(),i=0;n<3?i=n:n<6?i=n-3:n<9?i=n-6:n<12&&(i=n-9),a.setMonth(a.getMonth()-i),a.setDate(1),t.$emit("pick",[a,e])}},{text:"本年",onClick:function(t){var e=new Date,a=new Date(e.getFullYear(),0,1);t.$emit("pick",[a,e])}},{text:"去年",onClick:function(t){var e=new Date,a=new Date(e.getFullYear()-1,0,1);e.setFullYear(e.getFullYear()-1),e.setMonth(11),e.setDate(new Date(a.getFullYear()+1,1,0).getDate()),t.$emit("pick",[a,e])}}]}},"3ef6":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._v(" "),a("div",{staticClass:"uni-container"},[a("el-row",{staticClass:"uni-box tab"},[a("p",{class:{active:0===t.tabIndex},on:{click:function(e){return t.tab(0,-7)}}},[t._v("最近七天")]),t._v(" "),a("p",{class:{active:1===t.tabIndex},on:{click:function(e){return t.tab(1,-30)}}},[t._v("最近30天")]),t._v(" "),a("p",{class:{active:2===t.tabIndex},on:{click:function(e){return t.tab(2,-90)}}},[t._v("最近90天")])]),t._v(" "),a("el-row",{staticClass:"uni-box navbar"},[a("div",{staticClass:"navbar-box"},[a("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","range-separator":"至",size:"small","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions,"value-format":"yyyy-MM-dd",clearable:!1},on:{change:t.change},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),a("div",{staticClass:"uni-chats__title-tab"},t._l(t.options,function(e,n){return a("div",{key:n,staticClass:"uni-chats__title-tab-item",class:{active:t.selectIndex===n,border:0===n},on:{click:function(a){return t.navSelcetTab(e,n)}}},[t._v(t._s(e.label)+"\n          ")])}),0)],1),t._v(" "),a("div",{staticClass:"navbar-box"},[a("div",{staticClass:"navbar-info"},[a("span",{staticClass:"navbar-info-title"},[t._v("渠道：")]),t._v(" "),a("el-cascader",{attrs:{options:t.channelsOptions,size:"small",clearable:"","show-all-levels":!1},on:{change:function(e){return t.cascaderChange("ch",e)}},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}})],1),t._v(" "),t.versionsShow?a("div",[a("span",{staticClass:"navbar-info-title"},[t._v("版本号：")]),t._v(" "),a("el-cascader",{attrs:{options:t.versionsOptions,size:"small",clearable:"","show-all-levels":!1},on:{change:function(e){return t.cascaderChange("v",e)}},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}})],1):t._e()])]),t._v(" "),a("el-row",{staticClass:"uni-box"},[0===t.lineChartData.xAxis.length?a("div",{staticClass:"no-data-style"},[t._v("暂无数据")]):a("div",[a("line-chart",{attrs:{"chart-data":t.lineChartData}})],1)]),t._v(" "),a("div",{staticClass:"uni-box"},[a("el-table",{attrs:{data:t.tableList&&t.tableList.item,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center","min-width":"30"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.$index+1+t.formData.page*t.formData.page_size-t.formData.page_size))]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"日期",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.datetime))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"日活",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.dau))]}}])},[a("template",{slot:"header"},[t._v("\n            日活\n            "),a("tips",{attrs:{content:"选中日期当天的访问用户数 "}})],1)],2),t._v(" "),a("el-table-column",{attrs:{label:"周活",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.wau))])]}}])},[a("template",{slot:"header"},[t._v("\n            周活\n            "),a("tips",{attrs:{content:"选中日期所在自然周（包括选中日期在内）的访问用户数 "}})],1)],2),t._v(" "),a("el-table-column",{attrs:{label:"日活/周活",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.dau_wau_rate))]}}])},[a("template",{slot:"header"},[t._v("\n            日活/周活\n            "),a("tips",{attrs:{content:"选中日期的访问用户数占周访问用户数的百分比 "}})],1)],2),t._v(" "),a("el-table-column",{attrs:{"class-name":"status-col",label:"月活",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.mau))]}}])},[a("template",{slot:"header"},[t._v("\n            月活\n            "),a("tips",{attrs:{content:"选中日期所在自然月（包括选中日期在内）的访问用户数 "}})],1)],2),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"created_at",label:"日活/月活",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.dau_mau_rate))]}}])},[a("template",{slot:"header"},[t._v("\n            日活/月活\n            "),a("tips",{attrs:{content:"选中日期的访问用户数占月访问用户数的百分比 "}})],1)],2)],1),t._v(" "),t.tableList.total?a("div",{staticClass:"pagination-box"},[a("el-pagination",{attrs:{background:"","page-size":t.formData.page_size,layout:"sizes,prev, pager, next","current-page":t.formData.page,total:t.tableList.total},on:{"update:currentPage":function(e){return t.$set(t.formData,"page",e)},"update:current-page":function(e){return t.$set(t.formData,"page",e)},"current-change":t.currentChange,"size-change":t.sizeChange}})],1):t._e()],1)],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uni-header"},[a("span",{staticClass:"uni-header__title"},[t._v("用户活跃度")]),t._v(" "),a("span",{staticClass:"uni-header__title-sub"},[t._v("用户活跃度分析")])])}],s=(a("7f7f"),a("ac6a"),a("c5f6"),a("db72")),r=a("2f62"),o=a("ed08"),c=a("0f9f"),l=a("0926"),u=a("efa3"),p={name:"UserActivity",components:{LineChart:l["a"],Tips:u["a"]},data:function(){return{lineChartData:{xAxis:[],series:[]},options:[{value:"1",label:"日活"},{value:"2",label:"周活"},{value:"3",label:"月活"}],pickerOptions:c["a"],value:[Object(o["d"])(new Date,-7),Object(o["d"])(new Date)],channelsOptions:[],versionsOptions:[],dateValue:"",selectIndex:0,tableList:{},formData:{id_app:"",p:"",ch:0,v:0,period:1,start:Object(o["d"])(new Date,-7),end:Object(o["d"])(new Date),page:1,page_size:20},versionsShow:!1,value1:["0"],value2:["0"],tabIndex:0}},computed:Object(s["a"])({},Object(r["b"])(["id_app","p_info"])),watch:{id_app:function(t){t&&(this.formData.id_app=t,this.value1=["0"],this.value2=["0"],this.formData.ch=0,this.formData.v=0,this.requestInit(),this.getAppChannels(),this.getAppVersions())},p_info:function(t){this.formData.p=t,1===Number(t)||2===Number(t)?this.versionsShow=!0:this.versionsShow=!1,this.value1=["0"],this.value2=["0"],this.formData.ch=0,this.formData.v=0,this.requestInit(),this.getAppChannels(),this.getAppVersions()}},created:function(){this.formData.id_app=this.id_app,this.formData.p=this.p_info,1===Number(this.p_info)||2===Number(this.p_info)?this.versionsShow=!0:this.versionsShow=!1,this.id_app&&(this.requestInit(),this.getAppChannels(),this.getAppVersions())},methods:{requestInit:function(){this.formData.page=1,this.getActivityTrend(),this.getActivityDetail()},tab:function(t,e){this.tabIndex=t,this.formData.start=Object(o["d"])(new Date,e),this.formData.end=Object(o["d"])(new Date),this.value=[this.formData.start,this.formData.end],this.requestInit()},currentChange:function(t){this.formData.page=t,this.getActivityDetail()},sizeChange:function(t){this.formData.page_size=t,this.formData.page=1,this.getActivityDetail()},navSelcetTab:function(t,e){var a=t.value;this.selectIndex=e,this.formData.period=a,this.getActivityTrend()},change:function(t){this.tabIndex=-1,this.formData.start=t[0],this.formData.end=t[1],this.requestInit()},cascaderChange:function(t,e){"ch"===t?this.formData.ch=e[0]:this.formData.v=e[0],this.requestInit()},getAppChannels:function(){var t=this,e=this.formData,a=e.id_app,n=e.p,i={id_app:a,p:n};this.$api.App_Channels(i).then(function(e){var a=e.data,n=[{value:"0",label:"全部"}];a.forEach(function(t){n.push({value:t.id_channel,label:t.name})}),t.channelsOptions=n})},getAppVersions:function(){var t=this,e=this.formData,a=e.id_app,n=e.p,i={id_app:a,p:n};this.$api.App_Versions(i).then(function(e){var a=e.data,n=[{value:"0",label:"全部"}];a.forEach(function(t){n.push({value:t.id_version,label:t.version})}),t.versionsOptions=n})},getActivityTrend:function(){var t=this,e=this.formData,a=e.id_app,n=e.p,i=e.ch,s=e.v,r=e.start,o=e.end,c=e.period,l={id_app:a,p:n,ch:i,v:s,start:r,end:o,period:c};this.$api.Activity_Trend(l).then(function(e){t.lineChartData=e.data})},getActivityDetail:function(){var t=this,e=this.formData,a=e.id_app,n=e.p,i=e.ch,s=e.v,r=e.start,o=e.end,c=e.page,l=e.page_size,u={id_app:a,p:n,ch:i,v:s,start:r,end:o,page:c,page_size:l};this.$api.Activity_Detail(u).then(function(e){t.tableList=e.data})}}},h=p,v=(a("95ef"),a("2877")),f=Object(v["a"])(h,n,i,!1,null,"9a932388",null);e["default"]=f.exports},6460:function(t,e,a){},"95ef":function(t,e,a){"use strict";var n=a("6460"),i=a.n(n);i.a},ed08:function(t,e,a){"use strict";a.d(e,"d",function(){return s}),a.d(e,"c",function(){return r}),a.d(e,"a",function(){return o}),a.d(e,"e",function(){return c}),a.d(e,"b",function(){return l});a("3b2b"),a("4917"),a("4f7f"),a("5df3"),a("1c4c"),a("ac6a"),a("456d"),a("28a5");var n=a("768b"),i=(a("a481"),a("6b54"),a("7618"));function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day";"object"!==Object(i["a"])(t)&&(t=t.replace(/-/g,"/"));var n=new Date(t);switch(a){case"day":n.setDate(n.getDate()+e);break;case"month":n.setMonth(n.getMonth()+e);break;case"year":n.setFullYear(n.getFullYear()+e);break}var s=n.getFullYear(),r=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,o=n.getDate()<10?"0"+n.getDate():n.getDate();return s+"-"+r+"-"+o}function r(t,e,a){var i=t.split("-"),s=Object(n["a"])(i,3),r=s[0],o=s[1],c=s[2],l=e.split("-"),u=Object(n["a"])(l,3),p=u[0],h=u[1],v=u[2],f=new Date(r,o,c).getTime(),d=new Date(p,h,v).getTime(),D=864e5,g=12096e5,b=2592e6,m=d-f;return a&&0===m?1:m>=b?3:m>=g?2:m>=D?1:0}function o(t,e){return t=new Date(t.replace("-","/").replace("-","/")),e=new Date(e.replace("-","/").replace("-","/")),t<=e}function c(t){var e=[],a="天";switch(t){case 1:a="天";break;case 2:a="周";break;case 3:a="月";break}for(var n=0;n<9;n++){var i=n+1;1===t&&(8===i&&(i=14),9===i&&(i=30)),e.push({value:n+1,label:"".concat(i).concat(a,"后")})}return e}function l(t,e,a){var n,i,s,r,o,c=function c(){var l=+new Date-r;l<e&&l>0?n=setTimeout(c,e-l):(n=null,a||(o=t.apply(s,i),n||(s=i=null)))};return function(){for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];s=this,r=+new Date;var p=a&&!n;return n||(n=setTimeout(c,e)),p&&(o=t.apply(s,l),s=l=null),o}}}}]);