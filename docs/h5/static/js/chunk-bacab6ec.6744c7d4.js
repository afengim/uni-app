(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bacab6ec"],{"228b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._v(" "),a("div",{staticClass:"uni-container"},[a("el-row",{staticClass:"uni-box tab"},[a("p",{class:{active:0===t.tabIndex},on:{click:function(e){return t.tab(0,0)}}},[t._v("今天")]),t._v(" "),a("p",{class:{active:1===t.tabIndex},on:{click:function(e){return t.tab(1,-1)}}},[t._v("昨天")]),t._v(" "),a("p",{class:{active:2===t.tabIndex},on:{click:function(e){return t.tab(2,-7)}}},[t._v("最近七天")]),t._v(" "),a("p",{class:{active:3===t.tabIndex},on:{click:function(e){return t.tab(3,-30)}}},[t._v("最近30天")]),t._v(" "),a("p",{class:{active:4===t.tabIndex},on:{click:function(e){return t.tab(4,-90)}}},[t._v("最近90天")])]),t._v(" "),a("el-row",{staticClass:"uni-box navbar"},[a("div",{staticClass:"navbar-box"},[a("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","range-separator":"至",size:"small","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions,"value-format":"yyyy-MM-dd",clearable:!1},on:{change:t.change},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),a("div",{staticClass:"navbar-box"},[a("div",{staticClass:"navbar-info"},[a("span",{staticClass:"navbar-info-title"},[t._v("渠道：")]),t._v(" "),a("el-cascader",{attrs:{options:t.channelsOptions,size:"small",clearable:"","show-all-levels":!1},on:{change:function(e){return t.cascaderChange("ch",e)}},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}})],1),t._v(" "),t.versionsShow?a("div",[a("span",{staticClass:"navbar-info-title"},[t._v("版本号：")]),t._v(" "),a("el-cascader",{attrs:{options:t.versionsOptions,size:"small",clearable:"","show-all-levels":!1},on:{change:function(e){return t.cascaderChange("v",e)}},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}})],1):t._e()])]),t._v(" "),a("div",{staticClass:"uni-box"},[a("el-table",{attrs:{data:t.tableList.item,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",width:"60",fit:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.$index+1+t.formData.page*t.formData.page_size-t.formData.page_size))]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"事件ID",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{staticClass:"page-color",attrs:{to:"/event/event/detail?id_event="+e.row.id_event+"&event_name="+e.row.event_name+"&event_key="+e.row.event_key}},[t._v(t._s(e.row.event_key))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"事件名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("name-edit",{attrs:{"name-list":e},on:{"update:nameList":function(t){e=t},"update:name-list":function(t){e=t},confirmName:t.confirmName}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"触发用户数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.num_visitor))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"触发次数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.num_visits))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"人均次数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.visitor_avg_hits))]}}])})],1),t._v(" "),t.tableList.total?a("div",{staticClass:"pagination-box"},[a("el-pagination",{attrs:{background:"","page-size":t.formData.page_size,layout:"sizes,prev, pager, next","current-page":t.formData.page,total:t.tableList.total},on:{"update:currentPage":function(e){return t.$set(t.formData,"page",e)},"update:current-page":function(e){return t.$set(t.formData,"page",e)},"current-change":t.currentChange,"size-change":t.sizeChange}})],1):t._e()],1)],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uni-header"},[a("span",{staticClass:"uni-header__title"},[t._v("事件分析管理")]),t._v(" "),a("span",{staticClass:"uni-header__title-sub"},[t._v("分析用户自定义事件")]),t._v(" "),a("a",{staticClass:"link",attrs:{href:"//ask.dcloud.net.cn/article/36304",target:"_blank"}},[t._v("自定义事件说明>>")])])}],s=(a("c5f6"),a("0f9f")),o=a("5a9f"),r=a("ed08"),c=a("5ee0"),l={name:"PageRes",components:{NameEdit:c["a"]},mixins:[o["a"]],data:function(){return{options:[{value:"页面URL",label:"页面URL"},{value:"页面名称",label:"页面名称"}],pickerOptions:s["b"],value:[Object(r["d"])(new Date),Object(r["d"])(new Date)],tableList:{},screenData:{num_visitor:"0",num_visits:"0",visit_avg_time:"00:00:00",visitor_avg_time:"00:00:00",num_share:"0"},formData:{id_app:"",p:0,start:Object(r["d"])(new Date),end:Object(r["d"])(new Date),ch:0,v:0,page:1,page_size:20},versionsShow:!1,tabIndex:0}},watch:{id_app:function(t){t&&this.getEventList()},p_info:function(t){this.getEventList()}},created:function(){this.formData.id_app=this.id_app,this.formData.p=this.p_info,1===Number(this.p_info)||2===Number(this.p_info)?this.versionsShow=!0:this.versionsShow=!1,this.id_app&&this.getEventList()},methods:{confirmName:function(t,e,a){var n=this;this.formData.id_event=e.id_event,this.getEventModify(a,function(t){e.value=e.event_name=a,n.$message({type:"success",message:"保存成功!"})},function(t){n.$message({type:"error",message:"保存失败!"})})},currentChange:function(t){this.formData.page=t,this.getEventList()},sizeChange:function(t){this.formData.page_size=t,this.formData.page=1,this.getEventList()},tab:function(t,e){this.tabIndex=t,this.formData.start=Object(r["d"])(new Date,e),this.formData.end=Object(r["d"])(new Date,-1===e?e:0),this.value=[this.formData.start,this.formData.end],this.getEventList()},change:function(t){this.tabIndex=-1,this.formData.start=t[0],this.formData.end=t[1],this.formData.page=1,this.getEventList()},cascaderChange:function(t,e){"ch"===t?this.formData.ch=e[0]:this.formData.v=e[0],this.formData.page=1,this.getEventList()},getEventList:function(){var t=this,e=this.formData,a=e.id_app,n=e.p,i=e.ch,s=e.v,o=e.start,r=e.end,c=e.page,l=e.page_size,u={id_app:a,p:n,ch:i,v:s,start:o,end:r,page:c,page_size:l};this.$api.Event_List(u).then(function(e){t.tableList=e.data,t.tableList.item.map(function(t){t.value=t.event_name})})},getEventModify:function(t,e,a){var n=this.formData,i=n.id_app,s=n.id_event;this.$api.Event_Modify({id_app:i,id_event:s,name:t}).then(function(t){"function"===typeof e&&e(t)}).catch(function(t){"function"===typeof a&&a(t)})}}},u=l,v=(a("d9f4"),a("2877")),f=Object(v["a"])(u,n,i,!1,null,"c2ab5c68",null);e["default"]=f.exports},"4cfe":function(t,e,a){},d9f4:function(t,e,a){"use strict";var n=a("4cfe"),i=a.n(n);i.a}}]);