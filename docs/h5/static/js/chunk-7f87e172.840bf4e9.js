(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f87e172"],{"064c":function(t,e,a){},"0f9f":function(t,e,a){"use strict";a.d(e,"b",function(){return i}),a.d(e,"c",function(){return s}),a.d(e,"a",function(){return r});var n=a("ed08"),i={disabledDate:function(t){return Object(n["a"])(Object(n["d"])(new Date,1),Object(n["d"])(t))},shortcuts:[{text:"本周",onClick:function(t){var e=new Date,a=new Date,n=e.getDay()-1;a.setTime(a.getTime()-864e5*n),t.$emit("pick",[a,e])}},{text:"本月",onClick:function(t){var e=new Date,a=new Date,n=e.getDate();a.setTime(a.getTime()-864e5*(n-1)),t.$emit("pick",[a,e])}},{text:"上个月",onClick:function(t){var e=new Date,a=new Date,n=new Date;a.setMonth(a.getMonth()-1),a.setDate(1),e.setMonth(e.getMonth()-1),e.setDate(new Date(n.getFullYear(),n.getMonth(),0).getDate()),t.$emit("pick",[a,e])}},{text:"本季度",onClick:function(t){var e=new Date,a=new Date,n=a.getMonth(),i=0;n<3?i=n:n<6?i=n-3:n<9?i=n-6:n<12&&(i=n-9),a.setMonth(a.getMonth()-i),a.setDate(1),t.$emit("pick",[a,e])}},{text:"本年",onClick:function(t){var e=new Date,a=new Date(e.getFullYear(),0,1);t.$emit("pick",[a,e])}},{text:"去年",onClick:function(t){var e=new Date,a=new Date(e.getFullYear()-1,0,1);e.setFullYear(e.getFullYear()-1),e.setMonth(11),e.setDate(new Date(a.getFullYear()+1,1,0).getDate()),t.$emit("pick",[a,e])}}]},s={disabledDate:function(t){return Object(n["a"])(Object(n["d"])(new Date),Object(n["d"])(t))},shortcuts:[{text:"本周",onClick:function(t){var e=new Date,a=new Date,n=e.getDay()-1;a.setTime(a.getTime()-864e5*n),e.setDate(e.getDate()-1),a.getTime()>e.getTime()&&(a=e),t.$emit("pick",[a,e])}},{text:"本月",onClick:function(t){var e=new Date,a=new Date,n=e.getDate();a.setTime(a.getTime()-864e5*(n-1)),e.setDate(e.getDate()-1),a.getTime()>e.getTime()&&(a=e),t.$emit("pick",[a,e])}},{text:"上个月",onClick:function(t){var e=new Date,a=new Date,n=new Date;a.setMonth(a.getMonth()-1),a.setDate(1),e.setMonth(e.getMonth()-1),e.setDate(new Date(n.getFullYear(),n.getMonth(),0).getDate()),t.$emit("pick",[a,e])}},{text:"本季度",onClick:function(t){var e=new Date,a=new Date,n=a.getMonth(),i=0;n<3?i=n:n<6?i=n-3:n<9?i=n-6:n<12&&(i=n-9),a.setMonth(a.getMonth()-i),a.setDate(1),e.setDate(e.getDate()-1),t.$emit("pick",[a,e])}},{text:"本年",onClick:function(t){var e=new Date,a=new Date(e.getFullYear(),0,1);e.setDate(e.getDate()-1),t.$emit("pick",[a,e])}},{text:"去年",onClick:function(t){var e=new Date,a=new Date(e.getFullYear()-1,0,1);e.setFullYear(e.getFullYear()-1),e.setMonth(11),e.setDate(new Date(a.getFullYear()+1,1,0).getDate()),t.$emit("pick",[a,e])}}]},r={disabledDate:function(t){return Object(n["a"])(Object(n["d"])(new Date),Object(n["d"])(t))},shortcuts:[{text:"本周",onClick:function(t){var e=new Date,a=new Date,n=e.getDay()-1;a.setTime(a.getTime()-864e5*n),t.$emit("pick",[a,e])}},{text:"本月",onClick:function(t){var e=new Date,a=new Date,n=e.getDate();a.setTime(a.getTime()-864e5*(n-1)),t.$emit("pick",[a,e])}},{text:"上个月",onClick:function(t){var e=new Date,a=new Date,n=new Date;a.setMonth(a.getMonth()-1),a.setDate(1),e.setMonth(e.getMonth()-1),e.setDate(new Date(n.getFullYear(),n.getMonth(),0).getDate()),t.$emit("pick",[a,e])}},{text:"本季度",onClick:function(t){var e=new Date,a=new Date,n=a.getMonth(),i=0;n<3?i=n:n<6?i=n-3:n<9?i=n-6:n<12&&(i=n-9),a.setMonth(a.getMonth()-i),a.setDate(1),t.$emit("pick",[a,e])}},{text:"本年",onClick:function(t){var e=new Date,a=new Date(e.getFullYear(),0,1);t.$emit("pick",[a,e])}},{text:"去年",onClick:function(t){var e=new Date,a=new Date(e.getFullYear()-1,0,1);e.setFullYear(e.getFullYear()-1),e.setMonth(11),e.setDate(new Date(a.getFullYear()+1,1,0).getDate()),t.$emit("pick",[a,e])}}]}},"1d9f":function(t,e,a){},"4f72":function(t,e,a){"use strict";var n=a("1d9f"),i=a.n(n);i.a},bffb:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uni-user"},[t._m(0),t._v(" "),a("div",{staticClass:"uni-container"},[a("el-row",{staticClass:"uni-box tab"},[a("p",{class:{active:0===t.tabIndex},on:{click:function(e){return t.tab(0,0)}}},[t._v("今天")]),t._v(" "),a("p",{class:{active:1===t.tabIndex},on:{click:function(e){return t.tab(1,-1)}}},[t._v("昨天")]),t._v(" "),a("p",{class:{active:2===t.tabIndex},on:{click:function(e){return t.tab(2,-7)}}},[t._v("最近七天")]),t._v(" "),a("p",{class:{active:3===t.tabIndex},on:{click:function(e){return t.tab(3,-30)}}},[t._v("最近30天")]),t._v(" "),a("p",{class:{active:4===t.tabIndex},on:{click:function(e){return t.tab(4,-90)}}},[t._v("最近90天")])]),t._v(" "),a("el-row",{staticClass:"uni-box navbar"},[a("div",{staticClass:"navbar-box"},[a("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","range-separator":"至",size:"small","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions,"value-format":"yyyy-MM-dd",clearable:!1},on:{change:t.change},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),a("div",{staticClass:"navbar-box"},[a("div",{staticClass:"navbar-info"},[a("span",{staticClass:"navbar-info-title"},[t._v("渠道：")]),t._v(" "),a("el-cascader",{attrs:{options:t.channelsOptions,size:"small",clearable:"","show-all-levels":!1},on:{change:function(e){return t.cascaderChange("ch",e)}},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}})],1),t._v(" "),t.versionsShow?a("div",[a("span",{staticClass:"navbar-info-title"},[t._v("版本号：")]),t._v(" "),a("el-cascader",{attrs:{options:t.versionsOptions,size:"small",clearable:"","show-all-levels":!1},on:{change:function(e){return t.cascaderChange("v",e)}},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}})],1):t._e()])]),t._v(" "),a("div",{staticClass:"uni-box"},[a("el-tabs",{on:{"tab-click":t.tabClick},model:{value:t.navValue,callback:function(e){t.navValue=e},expression:"navValue"}},[a("el-tab-pane",{attrs:{label:"访问深度",name:"depth"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"访问时长",name:"duration"}})],1),t._v(" "),"depth"===t.formData.type?a("div",{staticClass:"uni-chats"},[a("el-row",{staticClass:"end"},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"uni-info"},[a("p",{staticClass:"uni-info__title"},[t._v("访问人数\n                "),a("tips",{attrs:{content:"访问过应用内任意页面的总用户数（去重） "}})],1),t._v(" "),a("p",{staticClass:"uni-info__today"},[t._v(t._s(t.dayData.num_visitor))])])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"uni-info"},[a("p",{staticClass:"uni-info__title"},[t._v("访问次数\n                "),a("tips",{attrs:{content:"访问过应用内任意页面总次数，多个页面之间跳转、同一页面的重复访问计为多次访问 "}})],1),t._v(" "),a("p",{staticClass:"uni-info__today"},[t._v(t._s(t.dayData.num_visits))])])])],1)],1):t._e(),t._v(" "),a("div",{staticClass:"uni-chats__title-tab"},t._l(t.options,function(e,n){return a("div",{key:n,staticClass:"uni-chats__title-tab-item",class:{active:t.selectIndex===n,border:0===n},on:{click:function(a){return t.navSelcetTab(e,n)}}},[t._v(t._s(e.label))])}),0),t._v(" "),0===t.lineChartData.xAxis.length?a("div",{staticClass:"no-data-style"},[t._v("暂无数据")]):a("div",[a("bar-chart",{attrs:{"chart-data":t.lineChartData}})],1)],1),t._v(" "),a("div",{staticClass:"uni-box"},[a("el-table",{attrs:{data:t.tableList,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"访问深度",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.name))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"访问人数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.num_visitor))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"占比",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.visitor_percentage))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"打开次数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.num_visits))]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"created_at",label:"占比",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.visits_percentage))]}}])})],1)],1)],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uni-header"},[a("span",{staticClass:"uni-header__title"},[t._v("用户忠诚度")]),t._v(" "),a("span",{staticClass:"uni-header__title-sub"},[t._v("用户对您应用的访问深度及访问频次情况。助您了解用户对应用的粘度，尤其在对内容改进后，效果是否有所提升")])])}],s=(a("ac6a"),a("7f7f"),a("c5f6"),a("db72")),r=a("2f62"),o=a("ed08"),c=a("0f9f"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},u=[],h=a("313e"),p=a.n(h),v=a("f42c");a("817d");var d=500,f={mixins:[v["a"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},chartData:{type:Object,required:!0}},data:function(){return{chart:null}},watch:{chartData:{deep:!0,handler:function(t){this.initChart(t)}}},mounted:function(){var t=this;this.$nextTick(function(){t.initChart(t.chartData)})},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.series,a=t.xAxis,n=t.per,i=void 0===n?"":n;this.chart=p.a.init(this.$el,"macarons");var s={xAxis:[{data:a,axisTick:{alignWithLabel:!0,show:!1},axisLine:{lineStyle:{color:"#999"}}}],yAxis:{axisTick:{show:!1},axisLine:{show:!1,lineStyle:{color:"#666"}}},grid:{top:60,left:"60",right:"50",bottom:"30"},tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:function(t){var e='<div class="tooltip-box">';return e+='<p class="tooltip-box__p tooltip-box__title">'.concat(t[0].name,"</p>"),t.forEach(function(t){var a=t.seriesName,n=t.value+i;-1!==a.indexOf("率")&&"%"!==i&&(n+="%"),e+='<div class="tooltip-box__p tooltip-box__item"><div class="tooltip-box__circle" style="background:'.concat(t.color,'"></div><span>').concat(t.seriesName,"</span> : <span>").concat(n,"</span></div>")}),e+="</div>",e},backgroundColor:"rgba(245, 245, 245, 0)",extraCssText:"box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);",padding:[0,0]},legend:{selectedMode:!1,data:[]},series:[]};e.forEach(function(t,e){s.legend.data.push(t.name),s.series.push({name:t.name,data:t.data,type:"bar",stack:"vistors",barWidth:"50px",animationDuration:d,itemStyle:{color:"#76cf80"}})}),this.chart.setOption(s)}}},D=f,_=(a("4f72"),a("2877")),b=Object(_["a"])(D,l,u,!1,null,null,null),g=b.exports,m=a("efa3"),w={components:{BarChart:g,Tips:m["a"]},data:function(){return{lineChartData:{xAxis:[],series:[]},dayData:{num_visitor:0,num_visits:0},tableList:[],options:[{value:"num_visitor",label:"访问人数"},{value:"num_visits",label:"访问次数"}],pickerOptions:c["c"],value:[Object(o["d"])(new Date),Object(o["d"])(new Date)],channelsOptions:[],versionsOptions:[],value1:["0"],value2:["0"],versionsShow:!1,formData:{id_app:"",p:"",ch:0,v:0,item:"num_visitor",type:"depth",start:Object(o["d"])(new Date),end:Object(o["d"])(new Date),page:1,page_size:10},selectIndex:0,navValue:"depth",tabIndex:0}},computed:Object(s["a"])({},Object(r["b"])(["id_app","p_info"])),watch:{id_app:function(t){t&&(this.formData.id_app=t,this.requestInit(),this.value1=["0"],this.value2=["0"],this.formData.ch=0,this.formData.v=0,this.getAppChannels(),this.getAppVersions())},p_info:function(t){this.formData.p=t,1===Number(t)||2===Number(t)?this.versionsShow=!0:this.versionsShow=!1,this.formData.ch=0,this.formData.v=0,this.value1=["0"],this.value2=["0"],this.requestInit(),this.getAppChannels(),this.getAppVersions()}},created:function(){this.formData.id_app=this.id_app,this.formData.p=this.p_info,1===Number(this.p_info)||2===Number(this.p_info)?this.versionsShow=!0:this.versionsShow=!1,this.id_app&&(this.requestInit(),this.getAppChannels(),this.getAppVersions())},methods:{requestInit:function(){this.getTrendOverview(),this.getLoyalty_Chart(),this.getLoyaltyDetail()},tab:function(t,e){this.tabIndex=t,this.formData.start=Object(o["d"])(new Date,e),this.formData.end=Object(o["d"])(new Date,-1===e?e:0),this.value=[this.formData.start,this.formData.end],this.requestInit()},tabClick:function(t){this.formData.type=t.name,this.requestInit()},currentChange:function(t){this.formData.page=t},sizeChange:function(t){this.formData.page_size=t,this.formData.page=1},navSelcetTab:function(t,e){var a=t.value;this.selectIndex=e,this.formData.item=a,this.getLoyalty_Chart()},change:function(t){this.tabIndex=-1,this.formData.start=t[0],this.formData.end=t[1],this.requestInit()},cascaderChange:function(t,e){"ch"===t?this.formData.ch=e[0]:this.formData.v=e[0],this.requestInit()},getAppChannels:function(){var t=this,e=this.formData,a=e.id_app,n=e.p,i={id_app:a,p:n};this.$api.App_Channels(i).then(function(e){var a=e.data,n=[{value:"0",label:"全部"}];a.forEach(function(t){n.push({value:t.id_channel,label:t.name})}),t.channelsOptions=n})},getAppVersions:function(){var t=this,e=this.formData,a=e.id_app,n=e.p,i={id_app:a,p:n};this.$api.App_Versions(i).then(function(e){var a=e.data,n=[{value:"0",label:"全部"}];a.forEach(function(t){n.push({value:t.id_version,label:t.version})}),t.versionsOptions=n})},getTrendOverview:function(){var t=this,e=this.formData,a=e.id_app,n=e.p,i=e.start,s=e.end,r=e.ch,o=e.v,c={id_app:a,p:n,start:i,end:s,ch:r,v:o};this.$api.Trend_Overview(c).then(function(e){t.dayData=e.data})},getLoyalty_Chart:function(){var t=this,e=this.formData,a=e.id_app,n=e.p,i=e.start,s=e.end,r=e.ch,o=e.v,c=e.item,l=e.type,u={id_app:a,p:n,start:i,end:s,ch:r,v:o,item:c,type:l};this.$api.Loyalty_Chart(u).then(function(e){t.lineChartData=e.data})},getLoyaltyDetail:function(){var t=this,e=this.formData,a=e.id_app,n=e.p,i=e.start,s=e.end,r=e.ch,o=e.v,c=e.item,l=e.type,u=e.page,h=e.page_size,p={id_app:a,p:n,start:i,end:s,ch:r,v:o,item:c,type:l,page:u,page_size:h};this.$api.Loyalty_Detail(p).then(function(e){t.tableList=e.data})}}},k=w,x=(a("d026"),Object(_["a"])(k,n,i,!1,null,"3a360d93",null));e["default"]=x.exports},d026:function(t,e,a){"use strict";var n=a("064c"),i=a.n(n);i.a},ed08:function(t,e,a){"use strict";a.d(e,"d",function(){return s}),a.d(e,"c",function(){return r}),a.d(e,"a",function(){return o}),a.d(e,"e",function(){return c}),a.d(e,"b",function(){return l});a("3b2b"),a("4917"),a("4f7f"),a("5df3"),a("1c4c"),a("ac6a"),a("456d"),a("28a5");var n=a("768b"),i=(a("a481"),a("6b54"),a("7618"));function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day";"object"!==Object(i["a"])(t)&&(t=t.replace(/-/g,"/"));var n=new Date(t);switch(a){case"day":n.setDate(n.getDate()+e);break;case"month":n.setMonth(n.getMonth()+e);break;case"year":n.setFullYear(n.getFullYear()+e);break}var s=n.getFullYear(),r=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,o=n.getDate()<10?"0"+n.getDate():n.getDate();return s+"-"+r+"-"+o}function r(t,e,a){var i=t.split("-"),s=Object(n["a"])(i,3),r=s[0],o=s[1],c=s[2],l=e.split("-"),u=Object(n["a"])(l,3),h=u[0],p=u[1],v=u[2],d=new Date(r,o,c).getTime(),f=new Date(h,p,v).getTime(),D=864e5,_=12096e5,b=2592e6,g=f-d;return a&&0===g?1:g>=b?3:g>=_?2:g>=D?1:0}function o(t,e){return t=new Date(t.replace("-","/").replace("-","/")),e=new Date(e.replace("-","/").replace("-","/")),t<=e}function c(t){var e=[],a="天";switch(t){case 1:a="天";break;case 2:a="周";break;case 3:a="月";break}for(var n=0;n<9;n++){var i=n+1;1===t&&(8===i&&(i=14),9===i&&(i=30)),e.push({value:n+1,label:"".concat(i).concat(a,"后")})}return e}function l(t,e,a){var n,i,s,r,o,c=function c(){var l=+new Date-r;l<e&&l>0?n=setTimeout(c,e-l):(n=null,a||(o=t.apply(s,i),n||(s=i=null)))};return function(){for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];s=this,r=+new Date;var h=a&&!n;return n||(n=setTimeout(c,e)),h&&(o=t.apply(s,l),s=l=null),o}}}}]);