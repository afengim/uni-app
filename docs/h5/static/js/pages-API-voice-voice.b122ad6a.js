(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-API-voice-voice"],{"2eed":function(t,e,i){"use strict";var n="iOS"==plus.os.name;function o(){var t=0,e=plus.ios.import("PHPhotoLibrary"),i=e.authorizationStatus();return t=0===i?null:3==i?1:0,plus.ios.deleteObject(e),t}function a(){var t=0,e=plus.ios.import("AVCaptureDevice"),i=e.authorizationStatusForMediaType("vide");return t=0===i?null:3==i?1:0,plus.ios.deleteObject(e),t}function r(){var t=0,e=plus.ios.import("CLLocationManager"),i=e.locationServicesEnabled(),n=e.authorizationStatus();return t=i?0===n?null:3===n||4===n?1:0:2,plus.ios.deleteObject(e),t}function s(){var t=0,e=plus.ios.import("UIApplication"),i=e.sharedApplication(),n=0;if(i.currentUserNotificationSettings){var o=i.currentUserNotificationSettings();n=o.plusGetAttribute("types"),0==n?(t=0,console.log("推送权限没有开启")):(t=1,console.log("已经开启推送功能!")),plus.ios.deleteObject(o)}else n=i.enabledRemoteNotificationTypes(),0==n?(t=3,console.log("推送权限没有开启!")):(t=4,console.log("已经开启推送功能!"));return plus.ios.deleteObject(i),plus.ios.deleteObject(e),t}function c(){var t=0,e=plus.ios.import("CNContactStore");e.authorizationStatusForEntityType(0);return t=0===authStatus?null:3==authStatus?1:0,plus.ios.deleteObject(e),t}function l(){var t=null,e=plus.ios.import("AVAudioSession"),i=e.sharedInstance(),n=i.recordPermission();return console.log("permissionStatus:"+n),t=1970168948===n?null:1735552628===n?1:0,plus.ios.deleteObject(e),t}function u(){var t=null,e=plus.ios.import("EKEventStore"),i=e.authorizationStatusForEntityType(0);return 3==i?(t=1,console.log("日历权限已经开启")):console.log("日历权限没有开启"),plus.ios.deleteObject(e),t}function d(){var t=null,e=plus.ios.import("EKEventStore"),i=e.authorizationStatusForEntityType(1);return 3==i?(t=1,console.log("备忘录权限已经开启")):console.log("备忘录权限没有开启"),plus.ios.deleteObject(e),t}function p(t){return new Promise(function(e,i){switch(t){case"push":e(s());break;case"location":e(r());break;case"record":e(l());break;case"camera":e(a());break;case"album":e(o());break;case"contact":e(c());break;case"calendar":e(u());break;case"memo":e(d());break;default:e(0);break}})}function f(t){return new Promise(function(e,i){plus.android.requestPermissions([t],function(t){for(var i=0,n=0;n<t.granted.length;n++){var o=t.granted[n];console.log("已获取的权限："+o),i=1}for(n=0;n<t.deniedPresent.length;n++){var a=t.deniedPresent[n];console.log("拒绝本次申请的权限："+a),i=0}for(n=0;n<t.deniedAlways.length;n++){var r=t.deniedAlways[n];console.log("永久拒绝申请的权限："+r),i=-1}e(i)},function(t){e({code:t.code,message:t.message})})})}function v(){if(n){var t=plus.ios.import("UIApplication"),e=t.sharedApplication(),i=plus.ios.import("NSURL"),o=i.URLWithString("app-settings:");e.openURL(o),plus.ios.deleteObject(o),plus.ios.deleteObject(i),plus.ios.deleteObject(e)}else{var a=plus.android.importClass("android.content.Intent"),r=plus.android.importClass("android.provider.Settings"),s=plus.android.importClass("android.net.Uri"),c=plus.android.runtimeMainActivity(),l=new a;l.setAction(r.ACTION_APPLICATION_DETAILS_SETTINGS);var u=s.fromParts("package",c.getPackageName(),null);l.setData(u),c.startActivity(l)}}function m(){var t=plus.ios.import("UIApplication"),e=t.sharedApplication(),i=plus.ios.import("NSURL"),n=i.URLWithString("App-prefs:root=General");e.openURL(n),plus.ios.deleteObject(n),plus.ios.deleteObject(i),plus.ios.deleteObject(e)}t.exports={isIOS:n,requestIOS:p,requestAndroid:f,gotoAppSetting:v,gotoiOSSetting:m}},"336a":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,"uni-image[data-v-5a1695cf]{width:%?150?%;height:%?150?%}.page-body-wrapper[data-v-5a1695cf]{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;margin-bottom:%?300?%}.page-body-time[data-v-5a1695cf]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.time-big[data-v-5a1695cf]{font-size:%?60?%;margin:%?20?%}.time-small[data-v-5a1695cf]{font-size:%?30?%}.page-body-buttons[data-v-5a1695cf]{margin-top:%?60?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around}.page-body-button[data-v-5a1695cf]{width:%?250?%;text-align:center}.button-stop-record[data-v-5a1695cf]{width:%?110?%;height:%?110?%;border:%?20?% solid #fff;background-color:#f55c23;border-radius:%?130?%;margin:0 auto}",""])},"5b6a":function(t,e,i){"use strict";i.r(e);var n=i("8a0b"),o=i("96f0");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("986f");var r=i("2877"),s=Object(r["a"])(o["default"],n["a"],n["b"],!1,null,"5a1695cf",null);e["default"]=s.exports},"5bb5":function(t,e,i){var n=i("336a");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("3bd35de0",n,!0,{sourceMap:!1,shadowMode:!1})},"76d0":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("a34a"));o(i("2eed"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e,i,n,o,a,r){try{var s=t[a](r),c=s.value}catch(l){return void i(l)}s.done?e(c):Promise.resolve(c).then(n,o)}function r(t){return function(){var e=this,i=arguments;return new Promise(function(n,o){var r=t.apply(e,i);function s(t){a(r,n,o,s,c,"next",t)}function c(t){a(r,n,o,s,c,"throw",t)}s(void 0)})}}var s=i("a8ac"),c=null,l=null,u=null,d=null,p={data:function(){return{title:"start/stopRecord、play/stopVoice",recording:!1,playing:!1,hasRecord:!1,tempFilePath:"",recordTime:0,playTime:0,formatedRecordTime:"00:00:00",formatedPlayTime:"00:00:00"}},onUnload:function(){this.end()},onLoad:function(){var t=this;d=uni.createInnerAudioContext(),d.onEnded(function(){clearInterval(c);var e=0;console.log("play voice finished"),t.playing=!1,t.formatedPlayTime=s.formatTime(e),t.playTime=e}),u=uni.getRecorderManager(),u.onStart(function(){console.log("recorder start"),t.recording=!0,l=setInterval(function(){t.recordTime+=1,t.formatedRecordTime=s.formatTime(t.recordTime)},1e3)}),u.onStop(function(e){console.log("on stop"),d.src=e.tempFilePath,t.hasRecord=!0,t.recording=!1}),u.onError(function(){console.log("recorder onError")})},methods:{startRecord:function(){var t=r(n.default.mark(function t(){return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:u.start({format:"mp3"});case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),stopRecord:function(){u.stop(),clearInterval(l)},playVoice:function(){var t=this;console.log("play voice"),this.playing=!0,c=setInterval(function(){t.playTime+=1,t.formatedPlayTime=s.formatTime(t.playTime)},1e3),d.play()},stopVoice:function(){clearInterval(c),this.playing=!1,this.formatedPlayTime=s.formatTime(0),this.playTime=0,d.stop()},end:function(){d.stop(),u.stop(),clearInterval(l),clearInterval(c),this.recording=!1,this.playing=!1,this.hasRecord=!1,this.playTime=0,this.recordTime=0,this.formatedRecordTime="00:00:00",this.formatedRecordTime="00:00:00"},clear:function(){this.end()}}};e.default=p},"8a0b":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("page-head",{attrs:{title:t.title}}),i("v-uni-view",{staticClass:"uni-padding-wrap"},[t.recording||t.playing||t.hasRecord?t._e():[i("v-uni-view",{staticClass:"page-body-time"},[i("v-uni-text",{staticClass:"time-big"},[t._v(t._s(t.formatedRecordTime))])],1),i("v-uni-view",{staticClass:"page-body-buttons"},[i("v-uni-view",{staticClass:"page-body-button"}),i("v-uni-view",{staticClass:"page-body-button",on:{click:function(e){e=t.$handleEvent(e),t.startRecord(e)}}},[i("v-uni-image",{attrs:{src:"../../../static/record.png"}})],1),i("v-uni-view",{staticClass:"page-body-button"})],1)],!0===t.recording?[i("v-uni-view",{staticClass:"page-body-time"},[i("v-uni-text",{staticClass:"time-big"},[t._v(t._s(t.formatedRecordTime))])],1),i("v-uni-view",{staticClass:"page-body-buttons"},[i("v-uni-view",{staticClass:"page-body-button"}),i("v-uni-view",{staticClass:"page-body-button",on:{click:function(e){e=t.$handleEvent(e),t.stopRecord(e)}}},[i("v-uni-view",{staticClass:"button-stop-record"})],1),i("v-uni-view",{staticClass:"page-body-button"})],1)]:t._e(),!0===t.hasRecord&&!1===t.playing?[i("v-uni-view",{staticClass:"page-body-time"},[i("v-uni-text",{staticClass:"time-big"},[t._v(t._s(t.formatedPlayTime))]),i("v-uni-text",{staticClass:"time-small"},[t._v(t._s(t.formatedRecordTime))])],1),i("v-uni-view",{staticClass:"page-body-buttons"},[i("v-uni-view",{staticClass:"page-body-button",on:{click:function(e){e=t.$handleEvent(e),t.playVoice(e)}}},[i("v-uni-image",{attrs:{src:"../../../static/play.png"}})],1),i("v-uni-view",{staticClass:"page-body-button",on:{click:function(e){e=t.$handleEvent(e),t.clear(e)}}},[i("v-uni-image",{attrs:{src:"../../../static/trash.png"}})],1)],1)]:t._e(),!0===t.hasRecord&&!0===t.playing?[i("v-uni-view",{staticClass:"page-body-time"},[i("v-uni-text",{staticClass:"time-big"},[t._v(t._s(t.formatedPlayTime))]),i("v-uni-text",{staticClass:"time-small"},[t._v(t._s(t.formatedRecordTime))])],1),i("v-uni-view",{staticClass:"page-body-buttons"},[i("v-uni-view",{staticClass:"page-body-button",on:{click:function(e){e=t.$handleEvent(e),t.stopVoice(e)}}},[i("v-uni-image",{attrs:{src:"../../../static/stop.png"}})],1),i("v-uni-view",{staticClass:"page-body-button",on:{click:function(e){e=t.$handleEvent(e),t.clear(e)}}},[i("v-uni-image",{attrs:{src:"../../../static/trash.png"}})],1)],1)]:t._e()],2)],1)},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},"96f0":function(t,e,i){"use strict";i.r(e);var n=i("76d0"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},"986f":function(t,e,i){"use strict";var n=i("5bb5"),o=i.n(n);o.a},a8ac:function(t,e,i){"use strict";function n(t){if("number"!==typeof t||t<0)return t;var e=parseInt(t/3600);t%=3600;var i=parseInt(t/60);t%=60;var n=t;return[e,i,n].map(function(t){return t=t.toString(),t[1]?t:"0"+t}).join(":")}function o(t,e){return"string"===typeof t&&"string"===typeof e&&(t=parseFloat(t),e=parseFloat(e)),t=t.toFixed(2),e=e.toFixed(2),{longitude:t.toString().split("."),latitude:e.toString().split(".")}}var a={UNITS:{"年":315576e5,"月":26298e5,"天":864e5,"小时":36e5,"分钟":6e4,"秒":1e3},humanize:function(t){var e="";for(var i in this.UNITS)if(t>=this.UNITS[i]){e=Math.floor(t/this.UNITS[i])+i+"前";break}return e||"刚刚"},format:function(t){var e=this.parse(t),i=Date.now()-e.getTime();if(i<this.UNITS["天"])return this.humanize(i);var n=function(t){return t<10?"0"+t:t};return e.getFullYear()+"/"+n(e.getMonth()+1)+"/"+n(e.getDay())+"-"+n(e.getHours())+":"+n(e.getMinutes())},parse:function(t){var e=t.split(/[^0-9]/);return new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5])}};t.exports={formatTime:n,formatLocation:o,dateUtils:a}}}]);