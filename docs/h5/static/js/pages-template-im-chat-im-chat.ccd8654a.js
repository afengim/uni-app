(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-template-im-chat-im-chat"],{"0d64":function(t,e,n){var i=n("9d92");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("5be39bc0",i,!0,{sourceMap:!1,shadowMode:!1})},"0d70":function(t,e,n){"use strict";n.r(e);var i=n("81eb"),a=n("cb72");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("7653");var s=n("2877"),c=Object(s["a"])(a["default"],i["a"],i["b"],!1,null,"498a6618",null);e["default"]=c.exports},1318:function(t,e,n){"use strict";n.r(e);var i=n("6df5"),a=n("534d");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("1c88");var s=n("2877"),c=Object(s["a"])(a["default"],i["a"],i["b"],!1,null,"b2e664d8",null);e["default"]=c.exports},"1c88":function(t,e,n){"use strict";var i=n("88d3"),a=n.n(i);a.a},2881:function(t,e,n){"use strict";var i=n("0d64"),a=n.n(i);a.a},4251:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"chat-input",data:function(){return{inputValue:""}},methods:{startRecognize:function(){var t={},e=this;t.engine="iFly",e.inputValue="",plus.speech.startRecognize(t,function(t){console.log(t),e.inputValue+=t},function(t){console.log("语音识别失败："+t.message)})},sendMessge:function(){var t=this;""==t.inputValue.trim()?t.inputValue="":(this.$emit("send-message",{type:"text",content:t.inputValue}),t.inputValue="")}}};e.default=i},4998:function(t,e,n){var i=n("bf89");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("0f7b4e94",i,!0,{sourceMap:!1,shadowMode:!1})},"534d":function(t,e,n){"use strict";n.r(e);var i=n("e14d"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},"6df5":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"m-item",attrs:{id:"message"+t.cid}},[n("v-uni-view",{staticClass:"m-left"},["home"==t.message.user?n("v-uni-image",{staticClass:"head_icon",attrs:{src:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/app/homeHL.png"}}):t._e()],1),n("v-uni-view",{staticClass:"m-content"},[n("v-uni-view",{staticClass:"m-content-head",class:{"m-content-head-right":"customer"==t.message.user}},[n("v-uni-view",{class:"m-content-head-"+t.message.user},[t._v(t._s(t.message.content))])],1)],1),n("v-uni-view",{staticClass:"m-right"},["customer"==t.message.user?n("v-uni-image",{staticClass:"head_icon",attrs:{src:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/app/customerHL.png"}}):t._e()],1)],1)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},7653:function(t,e,n){"use strict";var i=n("4998"),a=n.n(i);a.a},"81eb":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni-column"},[n("v-uni-view",{staticClass:"content",style:{height:t.style.contentViewHeight+"px"},attrs:{id:"content"}},[n("v-uni-scroll-view",{style:{height:t.style.contentViewHeight+"px"},attrs:{id:"scrollview","scroll-y":"true","scroll-with-animation":!0,"scroll-top":t.scrollTop}},[n("page-foot",{attrs:{name:t.name}}),t._l(t.messages,function(t,e){return n("message-show",{key:e,attrs:{message:t,cid:e}})}),n("v-uni-view",{attrs:{id:"bottom"}})],2)],1),n("v-uni-view",{staticClass:"foot"},[n("chat-input",{on:{"send-message":function(e){e=t.$handleEvent(e),t.getInputMessage(e)},focus:function(e){e=t.$handleEvent(e),t.inputGetFocus(e)}}})],1)],1)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"88d3":function(t,e,n){var i=n("bf9f");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("7a291785",i,!0,{sourceMap:!1,shadowMode:!1})},"9a12":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"footer"},[n("v-uni-view",{staticClass:"footer-left"},[n("v-uni-view",{staticClass:"uni-icon uni-icon-mic",on:{click:function(e){e=t.$handleEvent(e),t.startRecognize(e)}}})],1),n("v-uni-view",{staticClass:"footer-center"},[n("v-uni-input",{staticClass:"input-text",attrs:{type:"text"},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],1),n("v-uni-view",{staticClass:"footer-right",on:{click:function(e){e=t.$handleEvent(e),t.sendMessge(e)}}},[n("v-uni-view",{attrs:{id:"msg-type"}},[t._v("发送")])],1)],1)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"9d92":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".footer[data-v-4c1bebd5]{display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;width:100%;height:%?80?%;min-height:%?80?%;border-top:solid 1px #bbb;overflow:hidden;padding:%?5?%;background-color:#fafafa}.footer-left[data-v-4c1bebd5]{width:%?80?%;height:%?80?%;display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center}.footer-right[data-v-4c1bebd5]{width:%?120?%;height:%?80?%;display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center;color:#1482d1}.footer-center[data-v-4c1bebd5]{-webkit-flex:1;flex:1;height:%?80?%;display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center}.footer-center .input-text[data-v-4c1bebd5]{-webkit-flex:1;flex:1;background:#fff;border:solid %?1?% #ddd;padding:%?10?%!important;font-family:verdana!important;overflow:hidden;border-radius:%?15?%}",""])},bd06:function(t,e,n){"use strict";n.r(e);var i=n("9a12"),a=n("fb39");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("2881");var s=n("2877"),c=Object(s["a"])(a["default"],i["a"],i["b"],!1,null,"4c1bebd5",null);e["default"]=c.exports},bf89:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".uni-column[data-v-498a6618]{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column}.content[data-v-498a6618]{display:-webkit-flex;display:flex;-webkit-flex:1;flex:1;margin-bottom:%?100?%}.foot[data-v-498a6618]{position:fixed;width:100%;height:%?90?%;min-height:%?90?%;left:%?0?%;bottom:%?0?%;overflow:hidden}",""])},bf9f:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'.m-item[data-v-b2e664d8]{display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;padding-top:%?40?%}.m-left[data-v-b2e664d8]{display:-webkit-flex;display:flex;width:%?120?%;-webkit-justify-content:center;justify-content:center;-webkit-align-items:flex-start;align-items:flex-start}.m-content[data-v-b2e664d8]{display:-webkit-flex;display:flex;-webkit-flex:1;flex:1;-webkit-flex-direction:column;flex-direction:column;-webkit-justify-content:center;justify-content:center;word-break:break-all}.m-right[data-v-b2e664d8]{display:-webkit-flex;display:flex;width:%?120?%;-webkit-justify-content:center;justify-content:center;-webkit-align-items:flex-start;align-items:flex-start}.head_icon[data-v-b2e664d8]{width:%?80?%;height:%?80?%}.m-content-head[data-v-b2e664d8]{position:relative}.m-content-head-right[data-v-b2e664d8]{display:-webkit-flex;display:flex;-webkit-justify-content:flex-end;justify-content:flex-end}.m-content-head-home[data-v-b2e664d8]{text-align:left;background:#1482d1;border:1px #1482d1 solid;border-radius:%?20?%;padding:%?20?%;color:#fff}.m-content-head-home[data-v-b2e664d8]:before{border:%?15?% solid transparent;border-right:%?15?% solid #1482d1;left:%?-26?%;width:0;height:0;position:absolute;content:" "}.m-content-head-customer[data-v-b2e664d8]{border:%?1?% #fff solid;background:#fff;border-radius:%?20?%;padding:%?20?%}.m-content-head-customer[data-v-b2e664d8]:after{border:%?15?% solid transparent;border-left:%?15?% solid #fff;top:%?20?%;right:%?-26?%;width:0;height:0;position:absolute;content:" "}',""])},cb72:function(t,e,n){"use strict";n.r(e);var i=n("d692"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},d692:function(t,e,n){"use strict";var i=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("ac6a");var a=i(n("bd06")),o=i(n("1318")),s={data:function(){return{name:"xcecd@qq.com",style:{pageHeight:0,contentViewHeight:0,footViewHeight:90,mitemHeight:0},scrollTop:0,messages:[{user:"home",type:"head",content:"你好!"}]}},components:{chatInput:a.default,messageShow:o.default},onLoad:function(){var t=uni.getSystemInfoSync();this.style.pageHeight=t.windowHeight,this.style.contentViewHeight=t.windowHeight-uni.getSystemInfoSync().screenWidth/750*100},methods:{getInputMessage:function(t){this.addMessage("customer",t.content,!1),this.toRobot(t.content)},addMessage:function(t,e,n,i){var a=this;a.messages.push({user:t,content:e,hasSub:n,subcontent:i})},scrollToBottom:function(){var t=this,e=uni.createSelectorQuery();e.selectAll(".m-item").boundingClientRect(),e.select("#scrollview").boundingClientRect(),e.exec(function(e){t.style.mitemHeight=0,e[0].forEach(function(e){t.style.mitemHeight=t.style.mitemHeight+e.height+20}),t.style.mitemHeight>t.style.contentViewHeight&&(t.scrollTop=t.style.mitemHeight-t.style.contentViewHeight)})},toRobot:function(t){var e=this,n="http://www.tuling123.com/openapi/api";uni.request({url:n,data:{key:"acfbca724ea1b5db96d2eef88ce677dc",info:t,userid:"uni-test"},success:function(t){console.log("s",t),e.addMessage("home",t.data.text,!1),e.scrollToBottom(),console.log("request success:"+t.data.text)},fail:function(t){console.log("request fail",t),uni.showModal({content:t.errMsg,showCancel:!1})}})}}};e.default=s},e14d:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c5f6");var i={props:{message:{type:Object,default:function(){return{}}},cid:{type:[Number,String],default:""}}};e.default=i},fb39:function(t,e,n){"use strict";n.r(e);var i=n("4251"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a}}]);